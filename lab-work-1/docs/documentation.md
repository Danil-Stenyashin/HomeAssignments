# Лабораторная работа: Параллельная обработка изображений

## Тестовое окружение
- **Процессор**: AMD Ryzen 5 7535HS (6 ядер/12 потоков)
- **Оперативная память**: 16GB DDR5
- **Операционная система**: Linux
- **Компилятор**: g++

## Тестовые изображения
| Размер          | Разрешение   | Размер файла | Название |
|-----------------|--------------|--------------|----------|
| Маленькое       | 640x427      | 823 KB       | small.bmp|
| Среднее         | 1920x1080    | 7.4 MB       | medium.bmp|
| Большое         | 5184x3456    | 53 MB        | large.bmp|

## Результаты тестирования

### Производительность на маленьком изображении (640x427)
| Операция          | Последоват. (мс) | Параллельная (мс) | Ускорение |
|-------------------|------------------|-------------------|-----------|
| Загрузка          | 0                | 0                 | -        |
| Поворот по ЧС     | 5                | 4                 | 1.25x    |
| Поворот против ЧС | 2                | 3                 | 0.67x    |
| Гауссово размытие | 115              | 52                | 2.21x    |

### Производительность на среднем изображении (1920x1080)
| Операция          | Последоват. (мс) | Параллельная (мс) | Ускорение |
|-------------------|------------------|-------------------|-----------|
| Загрузка          | 0                | 0                 | -        |
| Поворот по ЧС     | 44               | 32                | 1.38x    |
| Поворот против ЧС | 30               | 13                | 2.31x    |
| Гауссово размытие | 1052             | 336               | 3.13x    |

### Производительность на большом изображении (5184x3456)
| Операция          | Последоват. (мс) | Параллельная (мс) | Ускорение |
|-------------------|------------------|-------------------|-----------|
| Загрузка          | 0                | 0                 | -        |
| Поворот по ЧС     | 374              | 177               | 2.11x    |
| Поворот против ЧС | 244              | 78                | 3.13x    |
| Гауссово размытие | 7142             | 1958              | 3.65x    |

## Анализ результатов

### Ключевые наблюдения
1. **Наибольшее ускорение достигнуто на Гауссовом размытии**:
   - До 3.65x на больших изображениях
   - Объясняется высокой вычислительной сложностью операции

2. **Поворот против часовой стрелки ускоряется лучше**:
   - В среднем 2.5x против 1.6x для поворота по часовой
   - Связано с особенностями доступа к памяти

3. **Эффективность зависит от размера изображения**:
   ```mermaid
   graph LR
   A[Размер изображения] --> B[Эффективность параллелизации]
   B --> C[Малое: 1.25-2.21x]
   B --> D[Среднее: 1.38-3.13x]
   B --> E[Большое: 2.11-3.65x]

## Особенности реализации

    Параллельная загрузка изображений:

        Чтение файла блоками

        Обработка строк в разных потоках

    Оптимизированные алгоритмы поворота:

        Разделение изображения на вертикальные полосы

        Обработка каждой полосы в отдельном потоке

    Блочное Гауссово размытие:

        Разделение изображения на квадратные блоки 32x32

        Распределение блоков между потоками

        Минимизация ложного разделения кэша (false sharing)

## Выводы

    Параллельная реализация обеспечивает значительное ускорение (до 3.65x) на больших изображениях

    Максимальный выигрыш достигается на операциях с высокой вычислительной сложностью

    Для маленьких изображений (менее 1MP) параллельная обработка может быть менее эффективной

    Оптимальное количество потоков соответствует количеству физических ядер процессора
